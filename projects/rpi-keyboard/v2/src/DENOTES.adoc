== General algorithm

Main algorithm is divided into several stages.
. Scan all keypads to determine which keys has been changed.
. If no keys changed between scans do nothing
. For each changed key
  ** If this key has controlled some of the modifiers determine
      whether or not this modifier is still activated by some other key.
      If this is not the case toggle modifier off.
  ** After determining which modifers are activated on this keypad
      add modifiers from other keypads.
  ** For each pressed key determine key code that will be sent to the
      PC.
. After previous stage we have
  1. List of currently pressed modifier keys
  2. List of key codes that should be sent to the PC

  Create report that will be sent to the pc

  [ditaa, report_structire, png]
  ....
  /--------------------------\
  | 8-bit modifier key codes |
  +--------------------------+
  | OEM reserved             |
  +--------------------------+
  | Key code                 |
  +--------------------------+
  | Key code                 |
  +--------------------------+
  | Key code                 |
  +--------------------------+
  | Key code                 |
  +--------------------------+
  | Key code                 |
  +--------------------------+
  | Key code                 |
  \--------------------------/
  ....
