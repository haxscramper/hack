[%- files = files.split(",") -%]
[%- image_files = image_files.split(",") -%]


\documentclass[a4paper,11pt]{article}
\usepackage[margin=2cm]{geometry}
\usepackage[english,russian]{babel}
\usepackage{fontspec}
\usepackage{graphicx}
\usepackage[parfill]{parskip}

\setmainfont{CMU Serif}[Ligatures=TeX]
\setmonofont{Consolas}

\usepackage{minted}

\begin{document}


[% INSERT $task %]

\section{Исходный код}

[% FOREACH class IN files %]
   \subsection{[% class.remove(class_prefix) %]}
   %%[% class %]
   \begin{minted}[framesep=2mm, linenos,breaklines]{java}
[% INSERT $class %]
   \end{minted}
[% END %]

\section{Блок-схемы}

%% Image prefix [% image_prefix %]
%% Image suffix [% image_suffix %]

[% FOREACH image_file IN image_files %]
\subsection{[% image_file.remove(image_prefix).remove(image_suffix).replace('_', '.') %]}

\includegraphics[width=\textwidth,height=\textheight,keepaspectratio]{[% image_file %]}
[% END %]

\end{document}
